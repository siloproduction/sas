@(user: Option[bean.User], userPanel: Html, categoryPanel: Html, pagePanel: Html)

@import helper._

@scripts = {
    <script type="text/javascript" src="@routes.Assets.at("javascripts/ang-admin.js")"></script>

    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/jquery.wysiwyg.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/controls/wysiwyg.colorpicker.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/controls/wysiwyg.cssWrap.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/controls/wysiwyg.image.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/controls/wysiwyg.link.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/jwysiwyg/controls/wysiwyg.table.js")"></script>

    <link type="text/css" rel="stylesheet" media="screen" href="@routes.Assets.at("javascripts/jwysiwyg/jquery.wysiwyg.css")" />
}

@main("Admin page", user, scripts) {

    <script type="text/javascript">
        admin.fillCurrentUsers();
    </script>

    <div id="admin-tabs">

        <tabset>
            <tab heading="Angular">
                <div ng-controller="AdminUserCtrl">
                    <br>
                    <div>
                        <button type="button" class="btn btn-sm btn-info glyphicon glyphicon-plus" ng-click="creationIsClosed = !creationIsClosed"></button>
                        <span class="bold">{{users.length}} users</span>
                        <br><br>

                        <div collapse="creationIsClosed">
                            <form>
                                <input type="hidden" ng-model="user.id" value="0">

                                <dl class=" ">
                                    <dd><input type="text" ng-model="user.login" value="" placeholder="login" required></dd>
                                </dl>

                                <dl class=" ">
                                    <dd><input type="password" ng-model="user.password" size="10" placeholder="xxxxxx" required></dd>
                                </dl>

                                <dl class=" " >
                                    <dd>
                                        <select name="profile" ng-model="user.profile" >
                                            <option value="User">User</option>
                                            <option value="Admin">Admin</option>
                                        </select>
                                    </dd>
                                </dl>

                                <dl class=" " >
                                    <button type="button" class="btn btn-sm btn-info" ng-click="createUser(user)">Create this user</button>
                                </dl>
                            </form>
                        </div>

                        <ul class="no-bullet" ng-repeat="user in users">
                            <li>
                                <button type="button" class="btn btn-sm btn-info glyphicon glyphicon-pencil"></button>
                                <button type="button" class="btn btn-sm btn-danger glyphicon glyphicon-trash" ng-click="deleteUser(user.id)"></button>
                                {{user.login}} <span class="bold small">({{user.profile}})</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </tab>
            <tab heading="User">@userPanel</tab>
            <tab heading="Category">@categoryPanel</tab>
            <tab heading="Page">@pagePanel</tab>
        </tabset>
    </div>
}
