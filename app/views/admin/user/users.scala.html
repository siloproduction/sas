@(users: Seq[bean.User])


<div id="admin-list-user">
    <ul>
        @for(user <- users) {
            @defining(bean.User.asUpdateFormId(user)) { formId =>
               <li>
                   <div class="hidden">
                       @views.html.admin.user.userUpdateForm(bean.UserForm.update(user), user.login)
                   </div>
                   <button onclick="$('#@formId').dialog({
                        close: function( event, ui ) {
                            fillCurrentUsers();
                        }
                   });">EDIT</button>

                   <button onclick="confirmDialog('Delete user @user.login',
                        function (dialogInstance) {
                            $.ajax({
                                url: '@routes.Admin.deleteUser(user.login)',
                                type: 'DELETE'
                            }).done(function() {
                                fillCurrentUsers();
                                $(dialogInstance).dialog('close');
                            }).fail(function( msg ) {
                                var alertContent = 'Error: ' + msg.responseText
                                alert(alertContent);
                            });
                        }
                   );">DELETE</button>
                   @user.login <small>(@user.profile)</small>
               </li>
           }
        }
    </ul>
</div>